#N canvas 0 0 1522 754 10;
#X obj 537 -319 gemhead 50;
#X obj 537 -289 pix_video;
#X obj 537 -259 pix_rgba;
#X obj 537 -229 trigger a a;
#X obj 514 -200 pix_separator;
#X obj 624 -200 pix_separator;
#X obj 514 -170 pix_texture;
#X obj 624 -110 pix_movement;
#X obj 620 -80 alpha;
#X obj 620 -50 pix_blob;
#X obj 514 -140 rectangle 5.33 4;
#X floatatom 640 -20 18 0 0 0 - - -, f 18;
#X text 617 -319 Link with gemwin \, give priority;
#X text 617 -289 Grab video input from available camera;
#X text 617 -259 convert video color to RGBA;
#X text 617 -229 split the video data;
#X msg 0 -300 dimen 800 600;
#X obj 0 -200 gemwin;
#X msg 0 -270 create;
#X msg 0 -240 destroy;
#X obj 0 -330 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 88 -302 set dimension of window;
#X text 50 -270 create new window;
#X text 60 -240 close window;
#X text 20 -330 start render;
#X text 50 -200 window handler;
#X obj 520 -20 pix_data;
#X obj 520 5 unpack 0 0 0;
#X floatatom 520 85 5 0 0 0 - - -, f 5;
#X floatatom 570 85 5 0 0 0 - - -, f 5;
#X floatatom 620 85 5 0 0 0 - - -, f 5;
#X obj 20 410 dac~;
#X msg 230 -210 stop;
#X text 530 55 red;
#X text 570 55 green;
#X text 620 55 blue;
#X obj 12 210 textfile;
#X msg 520 410 bang;
#X obj 12 235 print;
#X msg 10 120 read playlist.txt cr;
#X msg 10 190 rewind;
#X obj 20 340 readsf~ 2;
#X obj 22 374 *~;
#X obj 56 372 *~;
#X obj 208 228 adc~;
#X floatatom 210 290 5 0 0 0 - - -, f 5;
#X floatatom 210 400 5 0 0 0 - - -, f 5;
#X obj 208 258 env~ 100;
#X obj 210 -260 bng 27 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 12 -3 textfile;
#X msg 10 -55 read playlist.txt cr;
#X msg 20 -25 rewind;
#X obj 12 22 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 10 50 counter;
#X floatatom 10 75 5 0 0 0 - - -, f 5;
#X obj 10 -150 loadbang;
#X obj 10 -105 t a a a;
#X msg 80 -105 stop;
#X obj 20 -125 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X floatatom 520 240 5 0 0 0 - - -, f 5;
#X obj 520 210 *;
#X floatatom 530 270 5 0 0 0 - - -, f 5;
#X obj 520 295 *;
#X floatatom 520 320 5 0 0 0 - - -, f 5;
#X obj 650 210 expr if($f1 < 0.142 \, 0.142 \, if($f1 < 0.285 \, 0.285
\, if($f1 < 0.428 \, 0.428 \, if($f1 < 0.571 \, 0.571 \, if($f1 < 0.714
\, 0.714 \, if($f1 < 0.857 \, 0.857 \, 1)))))) \;;
#X msg 580 330 stop;
#X floatatom 520 385 5 0 0 0 - - -, f 5;
#X msg 80 15 3;
#X msg 514 -100 4;
#X msg 250 350 1;
#X obj 212 377 min;
#X floatatom 210 350 5 0 0 0 - - -, f 5;
#X obj 210 320 * 0.008;
#X obj 10 -75 metro 1;
#X text 684 -60 get movement through alpha channel;
#X text 634 -160 output camera video;
#X text 1020 220 logic determining genre out of 7;
#X text 1020 240 (assuming 7 equally sized sections);
#X text 890 140 logic determining song choice \,;
#X text 890 160 set up to allow custom sized playlists;
#X text 90 -150 pre-load all initial values;
#X text 250 -250 start playing;
#X text 270 -210 stop playing;
#X text 280 290 get ambient volume;
#X text 280 310 between tracks;
#X text 280 330 and adjust output volume;
#X msg 514 -120 0.012;
#X text 610 350 send enough bangs to get correct track from playlist
;
#X text 160 120 initialize playlist;
#X text 70 190 start from beginning of playlist;
#X text 70 210 read text file;
#X text 60 240 print tracks;
#X text 50 290 start playback command;
#X text 90 350 read soundfile;
#X text 80 -20 get number of tracks in playlist;
#X text 310 -60 makes sure that all commands;
#X text 310 -40 are completed in order;
#X obj 520 360 counter;
#X obj 520 340 metro 1;
#X text 60 410 ouput to speakers;
#X obj 520 120 expr if($f1 > $f2 && $f1 > $f3 \, $f1 \, if($f2 > $f1
&& $f2 > $f3 \, $f2 \, if($f3 > $f1 && $f3 > $f2 \, $f3 \, if($f1 >
$f3 && $f2 > $f3 \, (($f1 + $f2) / 2) \, if($f1 > $f2 && $f3 > $f2
\, (($f1 + $f2) / 2) \, if($f2 > $f1 && $f3 > $f1 \, (($f1 + $f2) /
2) \, (($f1 + $f2 + $f3) / 3))))))) \;;
#X msg 280 380 1;
#X text 310 380 start playback once done;
#X text 310 400 selecting track;
#X text 340 -280 refresh every 30 seconds;
#X text 350 -260 for demo \, remove metro;
#X text 350 -240 for normal use;
#X text 400 -100 set alpha channel;
#X text 400 -120 set sensitivity;
#X obj 270 -280 metro 30000;
#X obj 230 -60 t a a a, f 12;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 26 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 3 11 0;
#X connect 11 0 64 0;
#X connect 16 0 17 0;
#X connect 18 0 17 0;
#X connect 19 0 17 0;
#X connect 20 0 17 0;
#X connect 20 0 109 0;
#X connect 26 1 27 0;
#X connect 27 0 28 0;
#X connect 27 1 29 0;
#X connect 27 2 30 0;
#X connect 28 0 100 0;
#X connect 29 0 100 1;
#X connect 30 0 100 2;
#X connect 32 0 41 0;
#X connect 36 0 38 0;
#X connect 36 0 41 0;
#X connect 37 0 36 0;
#X connect 37 0 101 0;
#X connect 39 0 36 0;
#X connect 40 0 36 0;
#X connect 41 0 42 0;
#X connect 41 1 43 0;
#X connect 41 2 48 0;
#X connect 42 0 31 0;
#X connect 43 0 31 1;
#X connect 44 0 47 0;
#X connect 45 0 72 0;
#X connect 46 0 42 1;
#X connect 46 0 43 1;
#X connect 47 0 45 0;
#X connect 48 0 110 0;
#X connect 49 0 52 0;
#X connect 49 1 57 0;
#X connect 50 0 49 0;
#X connect 51 0 49 0;
#X connect 52 0 53 0;
#X connect 53 0 54 0;
#X connect 54 0 60 1;
#X connect 55 0 56 0;
#X connect 55 0 68 0;
#X connect 55 0 86 0;
#X connect 55 0 67 0;
#X connect 55 0 39 0;
#X connect 56 0 73 0;
#X connect 56 1 51 0;
#X connect 56 2 50 0;
#X connect 57 0 73 0;
#X connect 58 0 56 0;
#X connect 58 0 67 0;
#X connect 59 0 62 0;
#X connect 60 0 59 0;
#X connect 61 0 62 1;
#X connect 62 0 63 0;
#X connect 63 0 97 4;
#X connect 63 0 98 0;
#X connect 64 0 61 0;
#X connect 65 0 98 0;
#X connect 66 0 37 0;
#X connect 67 0 53 2;
#X connect 68 0 9 1;
#X connect 69 0 70 0;
#X connect 70 0 46 0;
#X connect 71 0 70 1;
#X connect 72 0 71 0;
#X connect 73 0 49 0;
#X connect 86 0 7 1;
#X connect 97 0 66 0;
#X connect 97 3 65 0;
#X connect 98 0 97 0;
#X connect 100 0 60 0;
#X connect 101 0 41 0;
#X connect 109 0 48 0;
#X connect 110 0 69 0;
#X connect 110 1 26 0;
#X connect 110 2 40 0;
